@using Microsoft.AspNetCore.Identity
@using test_case.Areas.Identity.Data

@inject SignInManager<test_caseUser> SignInManager
@inject UserManager<test_caseUser> UserManager

@model IndexModel
@{
    var user = await UserManager.GetUserAsync(User);
}

<div class="col-md-3">

        <div class="card" style="width: 18rem;">

          

          <div class="card-body">
            <figure class="text-center">
              <blockquote class="blockquote">
                <h5>@user.UserName</h5>
              </blockquote>
              <figcaption class="blockquote-footer">
                @user.Email
              </figcaption>
            </figure>

            <button type="button" class="w-100 rounded-pill btn btn-warning" data-bs-toggle="modal" data-bs-target="#exampleModal">
              Змінити нік
            </button>

            <!-- Modal -->

            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
              <div class="modal-dialog">

                <div class="modal-content">
                  <form id="profile-form" method="post">
                    <div class="modal-header">

                      <h5 class="modal-title" id="exampleModalLabel">Змінити імя</h5>
                      <input asp-for="Username" class="form-control" hidden disabled />
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>

                    <div class="modal-body">
                      <input asp-for="Input.Username" class="form-control" />
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Закрити</button>
                      <button type="submit" id="update-profile-button" class="btn btn-success">Зберегти зміни</button>

                    </div>
                  </form>
                </div>
              </div>
            </div>

            
                <div class="dropdown text-end py-3">
              <strong class="dropdown-toggle " role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
    More...
  </strong>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                <li><a class="nav-link @ManageNavPages.IndexNavClass(ViewContext)" id="profile" asp-page="./Index">Profile</a></li>
                <li>
                  <a class="nav-link @ManageNavPages.EmailNavClass(ViewContext)" id="email" asp-page="./Email">Email</a>
                </li>
                <li><a class="nav-link @ManageNavPages.ChangePasswordNavClass(ViewContext)" id="change-password" asp-page="./ChangePassword">Password</a></li>
                <li>
                  <hr class="dropdown-divider">
                </li>
                <li><a class="nav-link px-2 text-dark"><strong>Останній візит</strong> {{last_seen}}</a></li>
                <li>
                  <hr class="dropdown-divider">
                </li>
                <li><a class="nav-link text-dark px-2">Кількість замовлень  <strong>{{total_orders}}</strong></a></li>
                <li>
                   
                                    
                                        <form id="logoutForm" class="form-inline" asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })">
                                        <button id="logout" type="submit" class="nav-link btn btn-link text-dark">Logout</button>
                    
                                        </form>
                                    

        </li>
              </ul>
              
            </div>
          </div>
        </div>

      </div>